{% extends 'base.html' %}
{% load static %}

{% block content %}
<div
    style="min-height: 80vh; display: flex; align-items: center; justify-content: center; background-color: #f1f5f9; padding: 20px;">
    <div
        style="background: white; padding: 40px; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); max-width: 500px; width: 100%; text-align: center;">

        <div style="margin-bottom: 30px;">
            <span class="material-symbols-outlined" style="font-size: 64px; color: #3b82f6;">credit_card</span>
        </div>

        <h1 style="font-size: 28px; color: #0f172a; margin-bottom: 10px; font-weight: 700;">Complete Activation</h1>
        <p style="color: #64748b; margin-bottom: 30px; line-height: 1.6;">
            You are one step away from activating the account for <strong>{{ request_obj.airport_name }}</strong>.
        </p>

        <div
            style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; text-align: left; margin-bottom: 30px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                <span style="color: #64748b;">Plan Selected</span>
                <span style="font-weight: 600; color: #0f172a;">{{ request_obj.get_selected_plan_display }}</span>
            </div>
            <div
                style="display: flex; justify-content: space-between; align-items: center; padding-top: 15px; border-top: 1px dashed #cbd5e1;">
                <span style="color: #64748b;">Total Amount</span>
                <span style="font-weight: 700; color: #3b82f6; font-size: 1.2rem;">$499.00</span>
            </div>
        </div>

        <button id="checkout-button"
            style="width: 100%; padding: 16px; border-radius: 50px; border: none; background: #0f172a; color: white; font-weight: 600; font-size: 16px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;">
            <span class="material-symbols-outlined" style="font-size: 20px;">lock</span>
            Pay & Activate
        </button>
        <p style="margin-top: 15px; font-size: 0.85rem; color: #94a3b8;">
            <span class="material-symbols-outlined" style="font-size: 14px; vertical-align: middle;">secure_check</span>
            Secure Payment via Stripe
        </p>

        <script src="https://js.stripe.com/v3/"></script>
        <script type="text/javascript">
            var stripe = Stripe('{{ stripe_public_key }}');
            var checkoutButton = document.getElementById('checkout-button');

            checkoutButton.addEventListener('click', function () {
                stripe.redirectToCheckout({
                    sessionId: '{{ session_id }}'
                }).then(function (result) {
                    if (result.error) {
                        alert(result.error.message);
                    }
                });
            });
        </script>

    </div>
</div>
{% endblock %}